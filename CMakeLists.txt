#
# File generated by CMakeBuilder
# (Not really, but this is apparently needed by its editor.)

# Author: Jay Jay Billings
# Date: 20150907
# Adapted from the CMakeLists.txt file written for Xolotl and released under 
# the license of this project.

# Set a name for this project.
PROJECT ( FERN CXX )
# Set the minimum required version of cmake for this project.
cmake_minimum_required(VERSION 2.8)

# FERN requires C++11 to use shared pointers
list( APPEND CMAKE_CXX_FLAGS "-std=c++0x ${CMAKE_CXX_FLAGS}")

# Enable testing.
enable_testing()

# Add the tests is Boost is available
FIND_PACKAGE(Boost)
IF (Boost_FOUND)
    message(STATUS "Boost version ${Boost_VERSION} found.")
    message(STATUS "Tests will be built since Boost was found.")
    INCLUDE_DIRECTORIES("${Boost_INCLUDE_DIR}")
ENDIF()

# Create the documentation directory and set up the doc target.
set(DOC_DIR "docs")
if(NOT EXISTS ${DOC_DIR})
    execute_process(COMMAND ${CMAKE_COMMAND} -E make_directory "${DOC_DIR}")
endif(NOT EXISTS ${DOC_DIR})
set(DOXYFILE_OUTPUT_DIR "${DOC_DIR}")
set(DOXYFILE_LATEX "ON")
set(CMAKE_MODULE_PATH "${PROJECT_SOURCE_DIR}")
include(UseDoxygen OPTIONAL)

# Include directories for the main program. Note that include 
# directories must come before add subdirectory!
include_directories("${CMAKE_SOURCE_DIR}/src")
include_directories("${CMAKE_SOURCE_DIR}/tpls/simpleini-4.17")

# Add the source directory
add_subdirectory(src)
# Add the third party libraries
ADD_SUBDIRECTORY(tpls)

# Setup the library list
set(FERN_LIBS fern)

# Add an executable for the main program
ADD_EXECUTABLE(fern-exec ${CMAKE_SOURCE_DIR}/src/main.cpp)

# Add tests. The first one just makes sure it executes.
add_test(smoke_test_alpha fern-exec ${CMAKE_SOURCE_DIR}/data/alpha.ini)
# Check the results for the alpha network benchmark
# FIXME! Wrong files for now!
add_test(diff_test_alpha diff ${CMAKE_SOURCE_DIR}/data/alpha.ini ${CMAKE_SOURCE_DIR}/data/alpha.ini)

# Link the FERN library
target_link_libraries(fern-exec ${FERN_LIBS})
